<svg xmlns="http://www.w3.org/2000/svg" width="848" height="647" version="1.1"><g><rect width="3" height="16" x="593" y="8" fill="#cbcbcb" stroke="none" stroke-opacity="1"/><rect width="55" height="3" x="541" y="21" fill="#cbcbcb" stroke="none" stroke-opacity="1"/><rect width="56" height="17" x="537" y="4" fill="#ffffc0" stroke="#000" stroke-opacity="1" stroke-width="1"/><text x="565" y="18" fill="#000" font-family="Helvetica" font-size="10" text-anchor="middle" text-decoration="underline" xml:space="preserve">:DNSClient</text></g><g><line x1="567" x2="567" y1="45" y2="647" stroke="#000" stroke-dasharray="18 6" stroke-opacity="1"/></g><g><line x1="143" x2="143" y1="45" y2="647" stroke="#000" stroke-dasharray="18 6" stroke-opacity="1"/></g><g><rect width="3" height="16" x="177" y="8" fill="#cbcbcb" stroke="none" stroke-opacity="1"/><rect width="71" height="3" x="109" y="21" fill="#cbcbcb" stroke="none" stroke-opacity="1"/><rect width="72" height="17" x="105" y="4" fill="#ffffc0" stroke="#000" stroke-opacity="1" stroke-width="1"/><text x="141" y="18" fill="#000" font-family="Helvetica" font-size="10" text-anchor="middle" text-decoration="underline" xml:space="preserve">:D2UpdateMgr</text></g><text x="603" y="71" fill="#000" font-family="Helvetica" font-size="20" xml:space="preserve">Sequence depicting a</text><text x="603" y="91" fill="#000" font-family="Helvetica" font-size="20" xml:space="preserve">simple state model which</text><text x="603" y="111" fill="#000" font-family="Helvetica" font-size="20" xml:space="preserve">performs a single update.</text><g><polygon fill="#c0ffff" stroke="#000" stroke-opacity="1" points="6 115 120 115 120 125 130 125 130 185 6 185 6 115"/><line x1="120" x2="130" y1="115" y2="125" stroke="#000" stroke-opacity="1"/><text x="16" y="135" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">As part of Update</text><text x="16" y="145" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">Manager&apos;s sweep()</text><text x="16" y="155" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">between events it</text><text x="16" y="165" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">creates and starts the</text><text x="16" y="175" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">transaction</text></g><g><polygon fill="#c0ffff" stroke="#000" stroke-opacity="1" points="611 473 765 473 765 483 775 483 775 525 611 525 611 473"/><line x1="765" x2="775" y1="473" y2="483" stroke="#000" stroke-opacity="1"/><text x="621" y="493" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">runStateModel() Iterates through</text><text x="621" y="503" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">states until DONE_ST is</text><text x="621" y="513" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">reached</text></g><g><line x1="336" x2="336" y1="45" y2="647" stroke="#000" stroke-dasharray="18 6" stroke-opacity="1"/></g><g><rect width="10" height="213" x="138" y="131" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="3" height="16" x="396" y="8" fill="#cbcbcb" stroke="none" stroke-opacity="1"/><rect width="122" height="3" x="277" y="21" fill="#cbcbcb" stroke="none" stroke-opacity="1"/><rect width="123" height="17" x="273" y="4" fill="#ffffc0" stroke="#000" stroke-opacity="1" stroke-width="1"/><text x="335" y="18" fill="#000" font-family="Helvetica" font-size="10" text-anchor="middle" text-decoration="underline" xml:space="preserve">:NameChangeTransaction</text></g><g><polygon fill="#c0ffff" stroke="#000" stroke-opacity="1" points="611 330 769 330 769 340 779 340 779 388 611 388 611 330"/><line x1="769" x2="779" y1="330" y2="340" stroke="#000" stroke-opacity="1"/><text x="621" y="350" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">At some point later, DNSClient</text><text x="621" y="360" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">invokes callback when IO</text><text x="621" y="370" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">completes</text></g><g><rect width="10" height="25" x="331" y="77" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="210" x="331" y="406" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="24" x="562" y="283" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="24" x="138" y="77" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="219" x="331" y="128" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><polygon fill="#c0ffff" stroke="#000" stroke-opacity="1" points="596 206 766 206 766 216 776 216 776 252 596 252 596 206"/><line x1="766" x2="776" y1="206" y2="216" stroke="#000" stroke-opacity="1"/><text x="606" y="226" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">runStateModel() Iterates through</text><text x="606" y="236" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">states until an update is initiated</text></g><g><rect width="10" height="214" x="562" y="409" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><line x1="670" x2="572" y1="388" y2="417" stroke="#000" stroke-dasharray="4 4" stroke-opacity="1"/></g><g><line x1="149" x2="331" y1="142" y2="142" stroke="#000" stroke-opacity="1"/><polygon fill="#000" stroke="none" points="331 142 327 138 327 146"/></g><g><line x1="342" x2="562" y1="414" y2="414" stroke="#000" stroke-opacity="1"/><polygon fill="#000" stroke="none" points="342 414 346 410 346 418"/></g><g><line x1="149" x2="331" y1="82" y2="82" stroke="#000" stroke-opacity="1"/><polygon fill="#000" stroke="none" points="331 82 327 78 327 86"/></g><g><rect width="10" height="115" x="337" y="221" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="24" x="337" y="424" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="24" x="337" y="175" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="24" x="337" y="136" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="126" x="337" y="466" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 349 467 L 366 467 L 366 474 L 349 474"/><polygon fill="#000" stroke="none" points="349 474 353 478 353 470"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 349 222 L 366 222 L 366 229 L 349 229"/><polygon fill="#000" stroke="none" points="349 229 353 233 353 225"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 349 425 L 366 425 L 366 432 L 349 432"/><polygon fill="#000" stroke="none" points="349 432 353 436 353 428"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 349 137 L 366 137 L 366 144 L 349 144"/><polygon fill="#000" stroke="none" points="349 144 353 148 353 140"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 349 176 L 366 176 L 366 183 L 349 183"/><polygon fill="#000" stroke="none" points="349 183 353 187 353 179"/></g><g><line x1="342" x2="562" y1="611" y2="611" stroke="#000" stroke-dasharray="4 4" stroke-opacity="1"/><path fill="none" stroke="#000" stroke-opacity="1" d="M 558 607 L 562 611 L 558 615"/></g><g><line x1="595" x2="367" y1="228" y2="227" stroke="#000" stroke-dasharray="4 4" stroke-opacity="1"/></g><g><line x1="610" x2="367" y1="492" y2="472" stroke="#000" stroke-dasharray="4 4" stroke-opacity="1"/></g><g><rect width="10" height="95" x="343" y="491" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="83" x="343" y="247" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 355 248 L 372 248 L 372 255 L 355 255"/><polygon fill="#000" stroke="none" points="355 255 359 259 359 251"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 355 492 L 372 492 L 372 499 L 355 499"/><polygon fill="#000" stroke="none" points="355 499 359 503 359 495"/></g><g><line x1="354" x2="562" y1="288" y2="288" stroke="#000" stroke-opacity="1"/><path fill="none" stroke="#000" stroke-opacity="1" d="M 558 284 L 562 288 L 558 292"/></g><g><line x1="149" x2="331" y1="339" y2="339" stroke="#000" stroke-dasharray="4 4" stroke-opacity="1"/><path fill="none" stroke="#000" stroke-opacity="1" d="M 153 335 L 149 339 L 153 343"/></g><g><rect width="10" height="24" x="349" y="515" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="24" x="349" y="556" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><rect width="10" height="24" x="349" y="300" fill="#fff" stroke="#000" stroke-opacity="1" stroke-width="1"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 361 516 L 378 516 L 378 523 L 361 523"/><polygon fill="#000" stroke="none" points="361 523 365 527 365 519"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 361 557 L 378 557 L 378 564 L 361 564"/><polygon fill="#000" stroke="none" points="361 564 365 568 365 560"/></g><g><path fill="none" stroke="#000" stroke-opacity="1" d="M 361 301 L 378 301 L 378 308 L 361 308"/><polygon fill="#000" stroke="none" points="361 308 365 312 365 304"/></g><g><text x="439" y="283" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">doUpdate()</text></g><g><text x="361" y="173" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">setState(READY_ST)</text></g><g><text x="352" y="216" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">runStateModel(START_TRANSACTION_EVT)</text></g><g><text x="211" y="137" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">startTransaction()</text></g><g><text x="383" y="250" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">(getStateHandler())()</text></g><g><text x="363" y="410" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">operator ()()</text></g><g><text x="357" y="133" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">initStateHandlerMap()</text></g><g><text x="371" y="433" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">setDnsUpdateStatus()</text></g><g><text x="350" y="465" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">runStateModel(IO_COMPLETED_EVT)</text></g><g><text x="183" y="77" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">NameChangeTransaction()</text></g><g><text x="377" y="499" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">(getStateHandler)()</text></g><g><text x="374" y="579" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">setNextEvent(NOP_EVT)</text></g><g><text x="382" y="521" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">setState(DONE_ST)</text></g><g><text x="391" y="310" fill="#000" font-family="Helvetica" font-size="10" xml:space="preserve">setNextEvent(NOP_EVT)</text></g></svg>