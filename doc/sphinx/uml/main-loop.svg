<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="674" height="974" contentScriptType="application/ecmascript" contentStyleType="text/css" preserveAspectRatio="none" style="width:674px;height:974px" version="1.1" viewBox="0 0 674 974" zoomAndPan="magnify"><defs><filter id="f1hatkcuz2d0l4" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text x="178" y="17.402" fill="#000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="300">DHCP server main loop (Kea 1.8.0)</text><rect width="650" height="911.86" x="7" y="28.199" fill="#FFF" filter="url(#f1hatkcuz2d0l4)" style="stroke:#000;stroke-width:1.5"/><text x="294.5" y="43.734" fill="#000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75">Main Loop</text><rect width="572" height="467.86" x="49" y="170.199" fill="#FFF" filter="url(#f1hatkcuz2d0l4)" style="stroke:#000;stroke-width:1.5"/><text x="295.5" y="185.734" fill="#000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79">Event Loop</text><rect width="149" height="36.488" x="145.5" y="63.199" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="155.5" y="86.734" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129">Wait for next event</text><rect width="135" height="36.488" x="28.5" y="888.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="38.5" y="911.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115">Check Shutdown</text><rect width="77" height="36.488" x="306.5" y="578.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="316.5" y="601.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57">Timeout</text><rect width="62" height="36.488" x="311" y="277.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="321" y="300.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42">Signal</text><rect width="114" height="36.488" x="97" y="277.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="107" y="300.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94">Handle Signal</text><rect width="126" height="36.488" x="97" y="378.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="107" y="401.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106">External Socket</text><rect width="178" height="36.488" x="395" y="378.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="405" y="401.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158">Handle External Socket</text><rect width="103" height="36.488" x="371.5" y="479.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="381.5" y="502.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83">DHCP Query</text><rect width="117" height="36.488" x="97.5" y="479.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="107.5" y="502.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97">Process Query</text><rect width="94" height="36.488" x="60" y="711.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="70" y="734.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74">I/O Service</text><rect width="173" height="36.488" x="275.5" y="711.059" fill="#FEFECE" filter="url(#f1hatkcuz2d0l4)" style="stroke:#a80036;stroke-width:1.5"/><text x="285.5" y="734.594" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153">Execute ready handler</text><path id="run-&gt;run_one" fill="none" d="M265,99.3792 C265,114.9742 265,138.0042 265,157.8405 C265,160.32 265,162.7496 265,165.1086 C265,166.2881 265,167.4499 265,168.5915 C265,168.8768 265,169.161 265,169.4438 C265,169.5852 265,169.7263 265,169.867" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="265 169.867 269 160.867 265 164.867 261 160.867 265 169.867" style="stroke:#a80036;stroke-width:1"/><text x="236" y="142.768" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90">get next event</text><path id="run_one-&gt;signal" fill="none" d="M265,198.1292 C265,205.6592 265,286.0592 265,286.0592 C265,286.0592 305.68,286.0592 305.68,286.0592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="310.68 286.059 301.68 282.059 305.68 286.059 301.68 290.059 310.68 286.059" style="stroke:#a80036;stroke-width:1"/><path id="signal-&gt;handleSignal" fill="none" d="M310.96,295.0592 C310.96,295.0592 216.31,295.0592 216.31,295.0592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="211.31 295.059 220.31 299.059 216.31 295.059 220.31 291.059 211.31 295.059" style="stroke:#a80036;stroke-width:1"/><path id="handleSignal-&gt;poll" fill="none" d="M96.78,295.0592 C86.25,295.0592 78.5,295.0592 78.5,295.0592 C78.5,295.0592 78.5,705.9592 78.5,705.9592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="78.5 710.959 82.5 701.959 78.5 705.959 74.5 701.959 78.5 710.959" style="stroke:#a80036;stroke-width:1"/><path id="signal-&gt;external_socket" fill="none" d="M310.78,304.0592 C273.76,304.0592 217,304.0592 217,304.0592 C217,304.0592 217,372.8792 217,372.8792" style="stroke:#a80036;stroke-width:1;stroke-dasharray:7,7"/><polygon fill="#A80036" points="217 377.879 221 368.879 217 372.879 213 368.879 217 377.879" style="stroke:#a80036;stroke-width:1"/><path id="external_socket-&gt;handleExternalSocket" fill="none" d="M223.24,390.0592 C223.24,390.0592 389.87,390.0592 389.87,390.0592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="394.87 390.059 385.87 386.059 389.87 390.059 385.87 394.059 394.87 390.059" style="stroke:#a80036;stroke-width:1"/><path id="handleExternalSocket-&gt;poll" fill="none" d="M394.76,402.0592 C335.73,402.0592 269.17,402.0592 269.17,402.0592 C269.17,402.0592 269.17,723.0592 269.17,723.0592 C269.17,723.0592 159.34,723.0592 159.34,723.0592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="154.34 723.059 163.34 727.059 159.34 723.059 163.34 719.059 154.34 723.059" style="stroke:#a80036;stroke-width:1"/><path id="external_socket-&gt;query" fill="none" d="M218.75,414.3792 C218.75,441.9792 218.75,491.0592 218.75,491.0592 C218.75,491.0592 366.46,491.0592 366.46,491.0592" style="stroke:#a80036;stroke-width:1;stroke-dasharray:7,7"/><polygon fill="#A80036" points="371.46 491.059 362.46 487.059 366.46 491.059 362.46 495.059 371.46 491.059" style="stroke:#a80036;stroke-width:1"/><path id="query-&gt;processQuery" fill="none" d="M371.2,503.0592 C371.2,503.0592 219.62,503.0592 219.62,503.0592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="214.62 503.059 223.62 507.059 219.62 503.059 223.62 499.059 214.62 503.059" style="stroke:#a80036;stroke-width:1"/><path id="processQuery-&gt;poll" fill="none" d="M116.33,515.2592 C116.33,515.2592 116.33,705.9392 116.33,705.9392" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="116.33 710.939 120.33 701.939 116.33 705.939 112.33 701.939 116.33 710.939" style="stroke:#a80036;stroke-width:1"/><path id="query-&gt;timeout" fill="none" d="M377.5,515.2192 C377.5,515.2192 377.5,573.0192 377.5,573.0192" style="stroke:#a80036;stroke-width:1;stroke-dasharray:7,7"/><polygon fill="#A80036" points="377.5 578.019 381.5 569.019 377.5 573.019 373.5 569.019 377.5 578.019" style="stroke:#a80036;stroke-width:1"/><path id="timeout-&gt;poll" fill="none" d="M306.02,596.0592 C245.34,596.0592 135.17,596.0592 135.17,596.0592 C135.17,596.0592 135.17,705.8492 135.17,705.8492" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="135.17 710.849 139.17 701.849 135.17 705.849 131.17 701.849 135.17 710.849" style="stroke:#a80036;stroke-width:1"/><text x="277" y="675.628" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100">timeout expired</text><path id="poll-&gt;ready" fill="none" d="M154.07,735.0592 C154.07,735.0592 270.48,735.0592 270.48,735.0592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="275.48 735.059 266.48 731.059 270.48 735.059 266.48 739.059 275.48 735.059" style="stroke:#a80036;stroke-width:1"/><path id="poll-&gt;shutdown" fill="none" d="M107,747.3392 C107,747.3392 107,882.8792 107,882.8792" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="107 887.879 111 878.879 107 882.879 103 878.879 107 887.879" style="stroke:#a80036;stroke-width:1"/><text x="102" y="823.628" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105">no ready handler</text><path id="ready-&gt;ready" fill="none" d="M285,711.0292 C285,691.4792 285,663.0592 285,663.0592 C285,663.0592 272.33,663.0592 272.33,663.0592 C272.33,663.0592 272.33,818.0592 272.33,818.0592 C272.33,818.0592 362,818.0592 362,818.0592 C362,818.0592 362,752.0692 362,752.0692" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="362 747.069 358 756.069 362 752.069 366 756.069 362 747.069" style="stroke:#a80036;stroke-width:1"/><path id="run&lt;-shutdown" fill="none" d="M243.5,104.5792 C243.5,104.5792 243.5,906.0592 243.5,906.0592 C243.5,906.0592 202.48,906.0592 163.71,906.0592" style="stroke:#a80036;stroke-width:1"/><polygon fill="#A80036" points="243.5 99.579 239.5 108.579 243.5 104.579 247.5 108.579 243.5 99.579" style="stroke:#a80036;stroke-width:1"/><text x="258.5" y="960.727" fill="#888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="139">dashed arrow means priority</text></g></svg>